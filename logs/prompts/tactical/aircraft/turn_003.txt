================================================================================
TACTICAL EXECUTION - AIRCRAFT - TURN 3
================================================================================

=== SYSTEM PROMPT ===
You are a AIRCRAFT tactical operator for RED.


CORE RULES:
- One action per unit per turn
- Closer = higher hit probability
- Protect AWACS at all costs (losing it = defeat)

UNIT CAPABILITIES:
- AIRCRAFT: Mobile, armed (missiles), medium radar
- SAM: Stationary, armed, can toggle stealth
- AWACS: Mobile, unarmed, long radar (HVT)
- DECOY: Mobile, unarmed, appears as aircraft


**YOUR ROLE: AIRCRAFT**


- AIRCRAFT: Primary striker - Balance aggression with survival.


**THREAT INTERPRETATION:**
- CRITICAL (dist ≤3): Immediate danger - shoot or retreat NOW
- HIGH (4-6): Can engage next turn
- MEDIUM (7-10): Positioning threat
- LOW (>10): No immediate concern

**BEARING:** N=north, NE=northeast, E=east, etc. Use to understand enemy positions.

**hit_prob_from_enemy:** If >0, enemy CAN hit you. Prioritize defense if high.

**OUTPUT:** Valid JSON with action_type field for each decision.

================================================================================

=== USER PROMPT ===
**AIRCRAFT TACTICAL - Mode: AGGRESSIVE**
Objective: Engage and destroy enemy aircraft, focusing on 2v1 or 3v1 engagements.

**SITUATION:** We maintain air superiority after eliminating an enemy aircraft. The enemy is scattered, with a concentration in the center, posing a potential threat to our AWACS due to its low missile count.
**ENEMY FORMATION:** SCATTERED

**CONSTRAINTS:**
- NO moving to occupied positions: [(18, 6)]
- NO shooting claimed targets
- Choose idx from opts array
- Include action_type in each decision for validation

**ACTION FORMAT:**
- idx: Action index (0, 1, 2, etc.)
- act: Action type
- description: What the action does
- conflict: true if move would collide (avoid these!)

**ALLIED SAM COVERAGE:** 2 SAM(s) providing support
**AWACS INTEL:** 4 enemy contacts reported

**AIRCRAFT TACTICS:**
- HVT Priority: Shoot if is_hvt=true AND hit_prob >0.15
- Ammo Check: If missiles <2, conserve for HVTs
- AGGRESSIVE: Shoot hit_prob >0.1, APPROACH if no shots
- DEFENSIVE: Only CRITICAL threats, prefer RETREAT

**Units:**
[
 {
  "id": 10,
  "pos": [
   10,
   9
  ],
  "missiles": 3,
  "enemies": [
   {
    "id": 3,
    "type": "AIRCRAFT",
    "bearing": "NW",
    "dist": 5,
    "threat": "HIGH",
    "hit_prob": 0.17,
    "hit_prob_from_enemy": 0.48,
    "can_they_hit_me": true,
    "is_hvt": false
   },
   {
    "id": 5,
    "type": "AIRCRAFT",
    "bearing": "W",
    "dist": 5,
    "threat": "HIGH",
    "hit_prob": 0.0,
    "hit_prob_from_enemy": 0.45,
    "can_they_hit_me": true,
    "is_hvt": false
   },
   {
    "id": 4,
    "type": "AIRCRAFT",
    "bearing": "NW",
    "dist": 10,
    "threat": "MEDIUM",
    "hit_prob": 0.0,
    "hit_prob_from_enemy": 0.24,
    "can_they_hit_me": true,
    "is_hvt": false
   },
   {
    "id": 6,
    "type": "AIRCRAFT",
    "bearing": "NW",
    "dist": 11,
    "threat": "MEDIUM",
    "hit_prob": 0.0,
    "hit_prob_from_enemy": 0.23,
    "can_they_hit_me": true,
    "is_hvt": false
   }
  ],
  "opts": [
   {
    "idx": 0,
    "act": "WAIT",
    "description": "WAIT (hold position)"
   },
   {
    "idx": 1,
    "act": "MOVE",
    "dir": "UP",
    "conflict": false,
    "effect": "RETREAT",
    "description": "MOVE UP (RETREAT nearest at NW)"
   },
   {
    "idx": 2,
    "act": "MOVE",
    "dir": "DOWN",
    "conflict": false,
    "effect": "APPROACH",
    "description": "MOVE DOWN (APPROACH nearest at NW)"
   },
   {
    "idx": 3,
    "act": "MOVE",
    "dir": "LEFT",
    "conflict": false,
    "effect": "APPROACH",
    "description": "MOVE LEFT (APPROACH nearest at NW)"
   },
   {
    "idx": 4,
    "act": "MOVE",
    "dir": "RIGHT",
    "conflict": false,
    "effect": "RETREAT",
    "description": "MOVE RIGHT (RETREAT nearest at NW)"
   },
   {
    "idx": 5,
    "act": "SHOOT",
    "tgt": 3,
    "hit_prob": 0.17,
    "tgt_threat": "HIGH",
    "tgt_type": "AIRCRAFT",
    "tgt_bearing": "NW",
    "description": "SHOOT AIRCRAFT #3 (NW, 5 tiles) - 17% hit"
   }
  ]
 },
 {
  "id": 11,
  "pos": [
   10,
   3
  ],
  "missiles": 3,
  "enemies": [
   {
    "id": 3,
    "type": "AIRCRAFT",
    "bearing": "SW",
    "dist": 5,
    "threat": "HIGH",
    "hit_prob": 0.17,
    "hit_prob_from_enemy": 0.48,
    "can_they_hit_me": true,
    "is_hvt": false
   },
   {
    "id": 5,
    "type": "AIRCRAFT",
    "bearing": "SW",
    "dist": 11,
    "threat": "MEDIUM",
    "hit_prob": 0.0,
    "hit_prob_from_enemy": 0.22,
    "can_they_hit_me": true,
    "is_hvt": false
   },
   {
    "id": 4,
    "type": "AIRCRAFT",
    "bearing": "W",
    "dist": 4,
    "threat": "HIGH",
    "hit_prob": 0.25,
    "hit_prob_from_enemy": 0.51,
    "can_they_hit_me": true,
    "is_hvt": false
   },
   {
    "id": 6,
    "type": "AIRCRAFT",
    "bearing": "W",
    "dist": 5,
    "threat": "HIGH",
    "hit_prob": 0.0,
    "hit_prob_from_enemy": 0.4,
    "can_they_hit_me": true,
    "is_hvt": false
   }
  ],
  "opts": [
   {
    "idx": 0,
    "act": "WAIT",
    "description": "WAIT (hold position)"
   },
   {
    "idx": 1,
    "act": "MOVE",
    "dir": "UP",
    "conflict": false,
    "effect": "RETREAT",
    "description": "MOVE UP (RETREAT nearest at W)"
   },
   {
    "idx": 2,
    "act": "MOVE",
    "dir": "DOWN",
    "conflict": false,
    "effect": "APPROACH",
    "description": "MOVE DOWN (APPROACH nearest at W)"
   },
   {
    "idx": 3,
    "act": "MOVE",
    "dir": "LEFT",
    "conflict": false,
    "effect": "APPROACH",
    "description": "MOVE LEFT (APPROACH nearest at W)"
   },
   {
    "idx": 4,
    "act": "MOVE",
    "dir": "RIGHT",
    "conflict": false,
    "effect": "RETREAT",
    "description": "MOVE RIGHT (RETREAT nearest at W)"
   },
   {
    "idx": 5,
    "act": "SHOOT",
    "tgt": 3,
    "hit_prob": 0.17,
    "tgt_threat": "HIGH",
    "tgt_type": "AIRCRAFT",
    "tgt_bearing": "SW",
    "description": "SHOOT AIRCRAFT #3 (SW, 5 tiles) - 17% hit"
   },
   {
    "idx": 6,
    "act": "SHOOT",
    "tgt": 4,
    "hit_prob": 0.25,
    "tgt_threat": "HIGH",
    "tgt_type": "AIRCRAFT",
    "tgt_bearing": "W",
    "description": "SHOOT AIRCRAFT #4 (W, 4 tiles) - 25% hit"
   }
  ]
 }
]

**Claimed Targets:** []

**DECISION RULES:**
1. **CRITICAL threats (dist ≤3):** SHOOT if hit_prob >0.05 (survival first)
2. **HVTs (is_hvt: true):** SHOOT if hit_prob >0.1
3. **Mode-specific:**
   - AGGRESSIVE: Shoot if hit_prob >0.1, prefer APPROACH moves
   - DEFENSIVE: Shoot only CRITICAL, prefer RETREAT moves
   - RECON: Avoid combat unless CRITICAL/HVT, use FLANK moves
4. **Low ammo (<2 missiles):** Conserve for HVTs/CRITICAL only
5. **Conflicts:** Avoid moves marked with conflict: true

**MOVEMENT GUIDANCE:**
- "bearing" shows enemy direction (N, NE, E, SE, S, SW, W, NW)
- "effect" shows result: APPROACH (closer), RETREAT (further), FLANK (same dist)
- When no enemies: follow "bias" field for patrol direction

**OUTPUT FORMAT:**
{
  "decisions": [
    {"id": <unit_id>, "idx": <action_index>, "action_type": "<SHOOT|MOVE|WAIT|TOGGLE>", "why": "<brief reasoning>"}
  ],
  "claimed_targets": [<target_ids_if_shooting>]
}

**CRITICAL:** Output exactly 2 decisions. Include action_type for validation.


================================================================================
METADATA:
- Role: AIRCRAFT
- Turn: 3
- Units: [10, 11]
- Directive Mode: AGGRESSIVE
- Directive Priority: Engage and destroy enemy aircraft, focusing on 2v1 or 3v1 engagements.
- Shared Intel: ['awacs_sightings', 'sam_coverage']
================================================================================
